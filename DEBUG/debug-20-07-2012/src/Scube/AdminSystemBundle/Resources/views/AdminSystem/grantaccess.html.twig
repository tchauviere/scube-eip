{% extends 'ScubeBaseBundle:Base:core_application.html.twig' %}




{% block body %}
{{ parent() }}


<div class="Application">
	<table class="table_content">
		<tr>
			<td class="sidebar_left">
				<ul class="sidebar_navigation">
				{% include 'ScubeAdminSystemBundle:Adminsystem:menu.html.twig' %}
				</ul>
			</td>
			<td class="sidebar_main">
				<h1>System Settings : Maintenance settings : Grant Users</h1>
				
				
				<div class="result_table" id="top_infos" style="padding-bottom: 15px;">
					<table class="table_full_size result_table">
						<tr>
							<td style="text-align: center; color: black; width: 25%">
								<div class="header-text" style="margin-left: 5px; margin-right: 5px; background-color: #94211A; border-radius: 10px; padding-top: 10px; padding-bottom: 10px; text-align: center; color: white; font-weight: bold;">
										Use this application with caution. Unexperimented persons shouldn't modify those parameters.
								</div>
							</td>
						
							<td style="text-align: center; color: black; width: 50%;">
								
								<div style="margin-top: 10px; margin-bottom: 10px;">
									Unauthorized users under maintenance mode :</br>
								</div>
								
							</td>
							
							<td>
							</td>
						</tr>
					</table>
				</div>
					
				<div class="result_table_scroll">
					<table class="table_full_size result_table">
						<thead>
							<tr>
								<th>Firstname</th>
								<th>Lastname</th>
								<th>IP address</th>
								<th>Action</th>
							</tr>
						</thead>
						
						<tbody>
							{% for deniedUser in deniedUsersList | reverse %}
							<tr>
								<td>
									<div class="table_text" style="text-align: center;">{{ deniedUser.getFirstname }}</div>
								</td>
								<td>
									<div class="table_text" style="text-align: center;">{{ deniedUser.getSurname }}</div>
								</td>
								<td style="text-align: center">
								{% if deniedUser.getIp != NULL %}
									<div class="table_text" style="text-align: center;">{{ deniedUser.getIp }}</div>
								{% else %}
									<div class="table_text" style="text-align: center;">Unknown</div>
								{% endif %}
								</td>
								<td style="text-align: center">
										<a href="{{ path("ScubeAdminSystemBundle_modifyAllowedUsers", {'mode' : "add", 'id' : deniedUser.getId()} ) }}" class="button grey small">Grant Access</a>
									</div>
								</td>
							</tr>
			
							{% endfor %}
						</tbody>
					</table>	
				</div>
			</td>
		</tr>
	</table>
</div>

<script>

function resize_table()
{
	available_height = $(".Application").height()	 - $(".sidebar_main h1").outerHeight(true) - $("#top_infos").outerHeight(true);
	$('table.result_table').css("max-height", available_height);
	$('div.result_table_scroll').css("height", available_height);
}

$(document).ready(function() 
	{
		resize_table();
	});
$(window).resize(function() 
	{
		resize_table();
	});

</script>

{% endblock %}
